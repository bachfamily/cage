<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<?xml-stylesheet href="./_c74_ref.xsl" type="text/xsl"?>

<!--This file has been automatically generated by Doctor Max. DO NOT EDIT THIS FILE DIRECTLY.-->

<c74object name="cage.dynamics" module="cage" kind="patcher">

	<digest>
		Process velocities
	</digest>

	<description>
		<o>cage.dynamics</o> processes velocities through the parameters of a classic audio compression/expander
		(gate, threshold, ratio, makeup) plus a limiter, or alternatively through a lambda loop.
	</description>

	<!--METADATA-->
	<metadatalist>
		<metadata name="author">cageproject</metadata>
		<metadata name="tag">cage</metadata>
		<metadata name="tag">cage electrospectral</metadata>
	</metadatalist>

	<!--INLETS-->
	<inletlist>
		<inlet id="0" type="INLET_TYPE">
			<digest>
				Roll / Score
			</digest>
			<description>
			</description>
		</inlet>
		<inlet id="1" type="INLET_TYPE">
			<digest>
				Velocity (lambda inlet)
			</digest>
			<description>
			</description>
		</inlet>
	</inletlist>

	<!--OUTLETS-->
	<outletlist>
		<outlet id="0" type="INLET_TYPE">
			<digest>
				Roll / Score
			</digest>
			<description>
			</description>
		</outlet>
		<outlet id="1" type="INLET_TYPE">
			<digest>
				Velocity (lambda inlet)
			</digest>
			<description>
			</description>
		</outlet>
	</outletlist>

	<!--ARGUMENTS-->
	<objarglist>
		<objarg name="gate" optional="1" type="number">
			<digest>
				Gate velocity
			</digest>
			<description>
			</description>
		</objarg>
		<objarg name="threshold" optional="1" type="number">
			<digest>
				Threshold velocity
			</digest>
			<description>
			</description>
		</objarg>
		<objarg name="ratio" optional="1" type="number">
			<digest>
				Compression/expansion ratio
			</digest>
			<description>
			</description>
		</objarg>
		<objarg name="makeup" optional="1" type="number">
			<digest>
				Velocity offset
			</digest>
			<description>
			</description>
		</objarg>
		<objarg name="limiter" optional="1" type="number">
			<digest>
				Velocity limit
			</digest>
			<description>
			</description>
		</objarg>
	</objarglist>

	<!--MESSAGES-->
	<methodlist>
		<method name="bang">
			<arglist />
			<digest>
				Recalculate the dynamic compression
			</digest>
			<description>
				A number in the second inlet is the gate level:
				All the incoming notes with a velocity falling below this level will be deleted.
				The default is 0.<br />
				A number in the third inlet is the compression threshold:
				All the incoming notes with a velocity exceeding this level
				will be compressed according to the compression ratio. The default is 127.<br />
				A number in the fourth inlet is the compression ratio:
				the velocities of each incoming note will be velocity-compressed according to this ratio
				if they exceed the compression threshold. The default is 1.<br />
				A number in the fifth inlet will be added to the velocities
				will be compressed according to the compression ratio. The default is 0.<br />
				A number in the sixth inlet sets the limiter level:
				the velocities of each incoming note will be limited to this level.
				The default is 127.<br />
				N.B.: all the operations described above are applied according to the specified sequence.
				If a lambda loop is present (see below), then all the above parameters are ignored. <br />
			</description>
		</method>
		<method name="float">
			<arglist />
			<digest>
				Substitute Velocity (lambda)
			</digest>
			<description>
				The velocity of each note of the original roll or score
				is output through the second outlet, and a transformed velocity can be returned
				in the second inlet, in which case this velocity substitutes the original one
				without any other processing. If 0 is returned, then the corresponding note is deleted.
			</description>
		</method>
		<method name="llll">
			<arglist />
			<digest>
				Roll or score
			</digest>
			<description>
				An <m>llll</m> in the first inlet is the roll or the score to be processed.
			</description>
		</method>
	</methodlist>

	<!--ATTRIBUTES-->
	<attributelist>
		<attribute name="gate" get="1" set="1" type="float" size="1">
			<digest>
				Gate Level
			</digest>
			<description>
				The gate level:
				all the incoming notes with a velocity falling below this level will be deleted.
				The default is 0. If a lambda loop is present, the value of this attribute is ignored.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Gate Level" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="limiter" get="1" set="1" type="float" size="1">
			<digest>
				Limiter Level
			</digest>
			<description>
				The value of the <m>limiter</m> attribute
				limits the velocity of each note. This limiting is applied at the end
				of the processing chain. The default is 127.<br />
				If a lambda loop is present, the value of this attribute is ignored.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Limiter Level" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="makeup" get="1" set="1" type="float" size="1">
			<digest>
				Makeup
			</digest>
			<description>
				The value of the <m>makeup</m> attribute
				will be added to the velocity of each incoming note,
				after the compression has been performed. The default is 0.<br />
				If a lambda loop is present, the value of this attribute is ignored.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Makeup" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="out" get="1" set="1" type="symbol" size="1">
			<digest>
				Outlet Types
			</digest>
			<description>
			</description>
			<attributelist>
				<attribute name="category" get="1" set="1" type="symbol" size="1" value="Behavior" />
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Outlet Types" />
				<attribute name="save" get="1" set="1" type="int" size="1" value="1" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="ratio" get="1" set="1" type="float" size="1">
			<digest>
				Compression Ratio
			</digest>
			<description>
				The compression ratio:
				the velocities of each note processed by the <m>gate</m> attribute
				will be velocity-compressed according to this ratio
				if they exceed the compression threshold. The default is 1.<br />
				If a lambda loop is present, the value of this attribute is ignored.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Compression Ratio" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
		<attribute name="threshold" get="1" set="1" type="float" size="1">
			<digest>
				Compression Threshold
			</digest>
			<description>
				The compression threshold:
				all the notes processed according to the <m>gate</m> attribute
				and having a velocity exceeding this level
				will be compressed according to the compression ratio. The default is 1.<br />
				If a lambda loop is present, the value of this attribute is ignored.
			</description>
			<attributelist>
				<attribute name="label" get="1" set="1" type="symbol" size="1" value="Compression Threshold" />
				<attribute name="style" get="1" set="1" type="symbol" size="1" value="text" />
			</attributelist>
		</attribute>
	</attributelist>

	<!--SEEALSO-->
	<seealsolist>
		<seealso name="cage.volume" />
		<seealso name="cage.envelopes" />
	</seealsolist>

	<misc name = "Input">
		<entry name ="Inlet 1 (llll)">
			<description>
				Roll / Score.
			</description>
		</entry>
		<entry name ="Inlet 2 (number)">
			<description>
				Velocity (lambda inlet).
			</description>
		</entry>
	</misc>

	<misc name = "Output">
		<entry name ="Outlet 1 (llll)">
			<description>
				Roll / Score.
			</description>
		</entry>
		<entry name ="Outlet 2 (float)">
			<description>
				Velocity (lambda inlet).
			</description>
		</entry>
	</misc>

</c74object>